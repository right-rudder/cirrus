---
import { contactData } from "../../data/forms/contact-us-form";
import FormComp from "./FormComp.astro";
---

<section class="bg-white px-4 py-12 sm:px-6 lg:px-8 lg:py-20" aria-labelledby="contact-heading" id="discovery-form">
  <div class="flex flex-wrap gap-8 lg:gap-12 max-w-7xl mx-auto lg:flex-nowrap">
    {/* LEFT: Info panel */}
    <div class="w-full overflow-hidden rounded-lg text-slate-900 top-28 lg:w-1/2 lg:self-start lg:sticky">
      <div class="text-slate-900 p-6 sm:p-8 lg:p-10">
        <h2 class="text-4xl font-extrabold text-slate-950 sm:text-5xl">
          {contactData.info.title}
        </h2>
        {
          contactData.info.intro && (
            <p class="text-muted-200 text-xl/5 font-light mt-6 max-w-prose">{contactData.info.intro}</p>
          )
        }

        <ul class="mt-12 space-y-6">
          {
            contactData.info.addressLine1 && (
              <li class="flex items-center gap-4">
                <svg viewBox="0 0 24 24" class="h-10 w-10 text-rose-500">
                  <path
                    fill="currentColor"
                    d="M12 2a7 7 0 0 0-7 7c0 5.25 7 13 7 13s7-7.75 7-13a7 7 0 0 0-7-7Zm0 9.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5Z"
                  />
                </svg>
                <div>
                  <p class="text-muted-100 font-bold">{contactData.info.locationLabel || "Location"}</p>
                  <div class="flex flex-wrap gap-1">
                    <p class="text-muted-300">{contactData.info.addressLine1},</p>
                    {contactData.info.addressLine2 && <p class="text-muted-300">{contactData.info.addressLine2}</p>}
                  </div>
                </div>
              </li>
            )
          }

          {
            contactData.info.phoneValue && (
              <li class="flex items-center gap-4">
                <svg viewBox="0 0 24 24" class="h-10 w-10 text-rose-500">
                  <path
                    fill="currentColor"
                    d="M6.62 10.79a15.05 15.05 0 0 0 6.59 6.59l2.2-2.2a1 1 0 0 1 1.01-.24c1.11.37 2.31.57 3.58.57a1 1 0 0 1 1 1v3.49a1 1 0 0 1-1 1C10.29 22 2 13.71 2 3.99a1 1 0 0 1 1-1H6.5a1 1 0 0 1 1 1c0 1.27.2 2.47.57 3.58a1 1 0 0 1-.24 1.01l-2.2 2.21Z"
                  />
                </svg>
                <div>
                  <p class="text-muted-100 font-bold">{contactData.info.phoneLabel || "Phone"}</p>
                  <a
                    href={`tel:${contactData.info.phoneValue}`}
                    class="text-muted-300 transition-colors duration-300 ease-in-out hover:text-rose-500!"
                  >
                    {contactData.info.phoneValue}
                  </a>
                </div>
              </li>
            )
          }
        </ul>
      </div>
    </div>

    {/* RIGHT: Form */}
    <div class="bg-slate-900 rounded-sm p-6 text-white font-semibold sm:p-8 lg:p-10 lg:min-w-3xl">
      {
        contactData.eyebrow && (
          <p class="relative tracking-widest mb-8 w-fit">
            {contactData.eyebrow}
            <span class="absolute left-0 right-0 -bottom-2 bg-rose-500 h-1 rounded-b-full" />
          </p>
        )
      }

      {
        contactData.heading && (
          <h2 id="contact-heading" class="text-4xl font-bold mb-4 sm:text-5xl">
            {contactData.heading}
          </h2>
        )
      }

      {contactData.subheading && <p class="text-lg max-w-prose">{contactData.subheading}</p>}

      <FormComp content={contactData.form} />
    </div>
  </div>
</section>

<script>
  import { contactData } from "../../data/forms/contact-us-form";
  import { CONTACT_US_WEBHOOK_URL } from "astro:env/client";
  import { Form } from "../../components/utils/forms";

  new Form(contactData.form, CONTACT_US_WEBHOOK_URL);
</script>
